@{
    ViewBag.Title = "Đặt Lại Mật Khẩu";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="login-container">
    <div class="login-header">
        @if (ViewBag.ErrorMessage != null)
        {
            <p class="text-danger">@ViewBag.ErrorMessage</p>
        }
        <h1 class="login-title">Đặt Lại Mật Khẩu</h1>
    </div>

    <div id="resetPasswordForm" class="tab-content">
        <form method="post">
            <input type="hidden" name="email" value="@ViewBag.Email" />

            <div class="form-group">
                <label for="password" class="form-label">Mật khẩu</label>
                <div class="password-wrapper">
                    <input type="password" id="password" name="newPassword" class="form-control" placeholder="Nhập mật khẩu" required />
                    <button type="button" class="toggle-password" data-target="password">
                        <i class="fa fa-eye-slash"></i>
                    </button>
                </div>
            </div>

            <div class="form-group">
                <label for="confirmPassword" class="form-label">Xác nhận mật khẩu</label>
                <div class="password-wrapper">
                    <input type="password" id="confirmPassword" name="confirmPassword" class="form-control" placeholder="Nhập lại mật khẩu" required />
                    <button type="button" class="toggle-password" data-target="confirmPassword">
                        <i class="fa fa-eye-slash"></i>
                    </button>
                </div>
                <span id="confirmPasswordError" class="text-danger">
                    @if (ViewBag.ConfirmPasswordError != null)
                    {
                        @ViewBag.ConfirmPasswordError
                    }
                </span>
            </div>

            <button type="submit" class="btn-login">Cập Nhật Mật Khẩu</button>
        </form>

        <div class="register-link">
            <p>Quay lại <a href="@Url.Action("Index", "Login")">Đăng nhập</a></p>
        </div>
    </div>
</div>

<!-- FontAwesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Xử lý hiển thị mật khẩu
        document.querySelectorAll(".toggle-password").forEach(button => {
            button.addEventListener("click", function () {
                let targetId = this.getAttribute("data-target");
                let passwordField = document.getElementById(targetId);
                let icon = this.querySelector("i");

                if (passwordField.type === "password") {
                    passwordField.type = "text";
                    icon.classList.remove("fa-eye-slash");
                    icon.classList.add("fa-eye");
                } else {
                    passwordField.type = "password";
                    icon.classList.remove("fa-eye");
                    icon.classList.add("fa-eye-slash");
                }
            });
        });
    });
</script>
